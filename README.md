# Selective-Cobalt-Nickel-Separation
Code and supplementary archive for **Selective cobalt and nickel separation by bioacid-mediated electrowinning**.

**`Supplementary Data`** folder contains the following datasheet that was used for model training and retrieving
important fragment of the bioacids.

- *`raw_data.csv`*: raw data of the datasheet, containing five columns:
  - `acid`: name of the bioacids.
  - `SMILES`: SMILES of the bioacids.
  - `concentration`: the concentration of the bioacids (Unit: mM).
  - `potential`: the potential to retrieve the Co or Ni deposition current (Unit: V).
  - `selectivity`: the selectivity for Co-Ni separation. Calculated by dividing the Co deposition current by the
  Ni deposision current under the selected potential.


- **`dataset_w_ECFPs`**: dataset that contains the extended-connectivity fingerprints (ECFPs) of the bioacids. Can be
generated by `feature_engineering.py`.


- **`dataset_w_WECFPs`**: dataset that contains the weighted extended-connectivity fingerprints (WECFPs) of the bioacids.

To take the concentration of the bioacids into account, we used normalized concentration as the weight of the ECFPs to 
generate the weighted ECFPs (denoted by WECFPs). Each bit of ECFPs was multiplied by the weight to get the WECFPs. 
For example, if an experiment was performed with 10 mM bioacid, the weight would be 0.1667, and all bits of the ECFPs 
in this data would be multiplied by 0.1667 to get the WECFPs; on the other hand, if an experiment was performed with 
60 mM bioacid, the weight would be 1, and all bits of the ECFPs in this data would be multiplied by 1. A table for 
concentration-weight conversion is as follows for reference:


| concentration (mM)  |   10    |   20    |  30  |   40    |   50    | 60  |
|:-------------------:|:-------:|:-------:|:----:|:-------:|:-------:|:---:|
|       weight        | 0.1667  | 0.3333  | 0.5  | 0.6667  | 0.8333  |  1  |


`model_training_interpretation.py` Example code that use the whole dataset to train a random forest (RF) regression 
model and use SHAP to interpret the model (output the important substructure of bioacids).

`feature_engineering.py` Example code that convert the bioacids to weighted ECFP. for ML model training.

`fragment_retrieve.py` Example code that retrieve the substructure of bioacids for the important bits.